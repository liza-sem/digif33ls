document.addEventListener('DOMContentLoaded', function() {
  function getFaviconUrl(url) {
    const urlObject = new URL(url);
    return `https://logo.clearbit.com/${urlObject.hostname}`;
  }

  const defaultText = 'public';
  const blogTitleLinks = document.querySelectorAll('.blog-title a');

  blogTitleLinks.forEach(link => {
    const href = link.href;
    const faviconUrl = getFaviconUrl(href);
    const faviconImg = document.createElement('img');
    faviconImg.src = faviconUrl;

    faviconImg.onload = function() {
      if (faviconImg.naturalWidth === 0 || faviconImg.naturalHeight === 0) {
        const defaultSpan = document.createElement('span');
        defaultSpan.className = 'material-symbols-outlined';
        defaultSpan.textContent = defaultText;
        link.parentElement.insertBefore(defaultSpan, link);
      } else {
        link.parentElement.insertBefore(faviconImg, link);
      }
    };

    faviconImg.onerror = function() {
      const defaultSpan = document.createElement('span');
      defaultSpan.className = 'material-symbols-outlined';
      defaultSpan.textContent = defaultText;
      link.parentElement.insertBefore(defaultSpan, link);
    };
  });
});
